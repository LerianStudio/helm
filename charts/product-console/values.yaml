# Default values for product-console.
# This is a YAML-formatted file.
# Declare variables to be passed into your templates.

# -- Number of replicas for the deployment
replicaCount: 1

# -- Number of old ReplicaSets to retain for deployment rollback
revisionHistoryLimit: 10

image:
  # -- Repository for the product-console container image
  repository: lerianstudio/product-console
  # -- Image pull policy
  pullPolicy: IfNotPresent
  # -- Image tag used for deployment (defaults to Chart.AppVersion)
  tag: ""

# -- Secrets for pulling images from a private registry
imagePullSecrets: []
# - name: regcred

# -- Overrides the default generated name by Helm
nameOverride: ""
# -- Overrides the full name generated by Helm
fullnameOverride: ""
# -- Override the namespace
namespaceOverride: ""

# -- Annotations to be added to the Pod
podAnnotations: {}

podSecurityContext: {}
# fsGroup: 2000

securityContext:
  # -- Defines the group ID for the user running the process inside the container
  runAsGroup: 1000
  # -- Defines the user ID for the process running inside the container
  runAsUser: 1000
  # -- Ensures the process does not run as root
  runAsNonRoot: true
  capabilities:
    drop:
      - ALL
  # -- Defines the root filesystem as read-only
  readOnlyRootFilesystem: false

# -- PodDisruptionBudget configuration
pdb:
  # -- Enable or disable PodDisruptionBudget
  enabled: false
  # -- Minimum number of available pods
  minAvailable: 1
  # -- Maximum number of unavailable pods
  maxUnavailable: 1
  # -- Annotations for the PodDisruptionBudget
  annotations: {}

# -- Deployment update strategy
deploymentStrategy:
  # -- Type of deployment strategy
  type: RollingUpdate
  rollingUpdate:
    # -- Maximum number of pods that can be created over the desired number of pods
    maxSurge: 1
    # -- Maximum number of pods that can be unavailable during the update
    maxUnavailable: 0

service:
  # -- Kubernetes service type
  type: ClusterIP
  # -- Service port
  port: 8081
  # -- Service annotations
  annotations: {}

ingress:
  # -- Enable or disable ingress
  enabled: false
  # -- Ingress class name
  className: ""
  # -- Additional ingress annotations
  annotations: {}
  hosts:
    - host: ""
      paths:
        - path: /
          pathType: Prefix
  # -- TLS configuration for ingress
  tls: []
  # - secretName: product-console-tls
  #   hosts:
  #     - product-console.example.local

resources:
  # -- CPU and memory limits for pods
  limits:
    cpu: 1
    memory: 1024Mi
  # -- Minimum CPU and memory requests
  requests:
    cpu: 512m
    memory: 512Mi

autoscaling:
  # -- Enable or disable horizontal pod autoscaling
  enabled: false
  # -- Minimum number of replicas
  minReplicas: 1
  # -- Maximum number of replicas
  maxReplicas: 3
  # -- Target CPU utilization percentage for autoscaling
  targetCPUUtilizationPercentage: 80
  # -- Target memory utilization percentage for autoscaling
  targetMemoryUtilizationPercentage: 80

# -- Node selector for scheduling pods on specific nodes
nodeSelector: {}

# -- Tolerations for scheduling on tainted nodes
tolerations: []

# -- Affinity rules for pod scheduling
affinity: {}

serviceAccount:
  # -- Specifies whether a ServiceAccount should be created
  create: true
  # -- Annotations for the ServiceAccount
  annotations: {}
  # -- Name of the service account (defaults to fullname)
  name: ""

# -- ConfigMap for environment variables and configurations
# All values here will be set as environment variables in the deployment
configmap:
  # Application Configuration
  NODE_ENV: "production"
  MIDAZ_CONSOLE_PORT: "8081"

  # OpenTelemetry Configuration
  ENABLE_TELEMETRY: "false"
  OTEL_RECEIVER_HTTP_PORT: "4318"
  OTEL_HOST: "otel-collector"
  OTEL_URL_METRICS: ""
  OTEL_URL_TRACES: ""
  OTEL_URL_LOGS: ""

  # NextAuth Configuration
  NEXTAUTH_URL: "http://localhost:8081"

  # Midaz API Configuration
  MIDAZ_API_HOST: "midaz-onboarding"
  MIDAZ_API_PORT: "3000"
  MIDAZ_BASE_PATH: "http://midaz-onboarding:3000/v1"
  MIDAZ_TRANSACTION_BASE_HOST: "midaz-transaction"
  MIDAZ_TRANSACTION_BASE_PORT: "3001"
  MIDAZ_TRANSACTION_BASE_PATH: "http://midaz-transaction:3001/v1"

  # Plugin Auth Configuration
  PLUGIN_AUTH_ENABLED: "false"
  PLUGIN_AUTH_CLIENT_ID: ""
  PLUGIN_AUTH_HOST: "plugin-access-manager-auth"
  PLUGIN_AUTH_PORT: "4000"
  PLUGIN_AUTH_BASE_PATH: "http://plugin-access-manager-auth:4000/v1"

  # Plugin Identity Configuration
  PLUGIN_IDENTITY_HOST: "plugin-access-manager-identity"
  PLUGIN_IDENTITY_PORT: "4001"
  PLUGIN_IDENTITY_BASE_PATH: "http://plugin-access-manager-identity:4001/v1"

  # MongoDB Configuration
  MONGODB_URI: "mongodb://mongodb:27017/?directConnection=true"
  MONGODB_DB_NAME: "product-console"
  MONGODB_USER: "midaz"

  # CRM Plugin Configuration
  CRM_BASE_PATH: "http://crm-plugin:4003/v1/"

  # Reporter Configuration
  REPORTER_BASE_PATH: "http://reporter:3002/v1"

  # Account Type Validation
  MIDAZ_ACCOUNT_TYPE_VALIDATION_ENABLED: "false"
  MIDAZ_ACCOUNT_TYPE_VALIDATION: ""

  # NextJS Public Configuration
  NEXT_PUBLIC_MIDAZ_CONSOLE_AVATAR_ALLOWED_FORMAT: "jpeg,jpg,png,svg"
  NEXT_PUBLIC_MIDAZ_APPLICATION_OPTIONS: "midaz,plugin-fees,plugin-crm,plugin-smart-templates"
  NEXT_PUBLIC_PLUGIN_AUTH_ENABLED: "false"
  NEXT_PUBLIC_MIDAZ_VERSION: ""

# -- Extra environment variables from ConfigMap (merged with configmap values)
extraEnvVars: {}

# -- Secrets for storing sensitive data
# All values here will be base64 encoded and set as environment variables
secrets:
  PLUGIN_AUTH_CLIENT_SECRET: ""
  NEXTAUTH_SECRET: "change-me-in-production"
  MONGODB_PASS: "lerian"

# -- Use existing secret instead of creating one
useExistingSecret: false
# -- Name of the existing secret to use
existingSecretName: ""
