{{- if and .Values.matcher.enabled (not .Values.matcher.useExistingSecret) }}
apiVersion: v1
kind: Secret
metadata:
  name: {{ include "matcher.fullname" . }}
  namespace: {{ include "global.namespace" . }}
type: Opaque
data:
  # PostgreSQL Secrets
  POSTGRES_PASSWORD: {{ .Values.matcher.secrets.POSTGRES_PASSWORD | default "lerian" | b64enc | quote }}
  POSTGRES_REPLICA_PASSWORD: {{ .Values.matcher.secrets.POSTGRES_REPLICA_PASSWORD | default "lerian" | b64enc | quote }}

  # Redis/Valkey Secrets
  REDIS_PASSWORD: {{ .Values.matcher.secrets.REDIS_PASSWORD | default "lerian" | b64enc | quote }}

  # RabbitMQ Secrets
  RABBITMQ_PASSWORD: {{ .Values.matcher.secrets.RABBITMQ_PASSWORD | default "lerian" | b64enc | quote }}

  # Object Storage Secrets
  OBJECT_STORAGE_ACCESS_KEY_ID: {{ .Values.matcher.secrets.OBJECT_STORAGE_ACCESS_KEY_ID | default "" | b64enc | quote }}
  OBJECT_STORAGE_SECRET_ACCESS_KEY: {{ .Values.matcher.secrets.OBJECT_STORAGE_SECRET_ACCESS_KEY | default "" | b64enc | quote }}

  # Authentication Secrets
  AUTH_JWT_SECRET: {{ .Values.matcher.secrets.AUTH_JWT_SECRET | default "" | b64enc | quote }}
{{- end }}
